language: objective-c
before_install:
- brew update
- brew upgrade xctool
- brew install s3cmd
- gem install cocoapods --no-ri --no-rdoc
script:
- xcodebuild -workspace Titanium.xcworkspace -scheme Titanium -sdk iphonesimulator test
- if [[ "$TRAVIS_BRANCH" == "master" ]]; then xctool -workspace Titanium.xcworkspace -scheme Titanium -configuration "Release" -sdk iphoneos OBJROOT=$PWD/build SYMROOT=$PWD/build ONLY_ACTIVE_ARCH=NO; fi